main() {
  local pwd_dir=$(basename $PWD)
  local link_dir="$PWD/space"
  if [[ "$pwd_dir" == "space" ]] && [[ -L "$PWD" ]]; then
    # PWD is a space
    abs_path=$(readlink -f "$PWD")
    vscode $abs_path
  elif [ -L "$link_dir" ]; then
    # PWD has a space
    abs_path=$(readlink -f "$link_dir")
    vscode $abs_path
  fi
}

main
