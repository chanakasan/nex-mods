main() {
  local pwd_dir=$(basename $PWD)
  local guess_link_dir="$PWD/space"
  if pwd_is_a_space; then
    vscode $(readlink -f "$PWD")
  elif pwd_has_a_space; then
    vscode $(readlink -f "$guess_link_dir")
  else
    echo " Usage: ed <arg>"
    echo
  fi
}

pwd_has_a_space() {
  if [[ -L "$guess_link_dir" ]]; then
    return 0
  else
    return 1
  fi
}

pwd_is_a_space() {
  if [[ "$pwd_dir" == "space" ]] && [[ -L "$PWD" ]]; then
    return 0
  else
    return 1
  fi
}

main
