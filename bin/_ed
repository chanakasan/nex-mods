#!/bin/bash

main() {
  local a1="$1"
  local a2="$2"
  local mods_path=$nex_mods_path/src
  local user_mods_path=$HOME/user_mods
  local fn=_ed_$a1
  if [[ $(type -t $fn ) == function ]]; then
    $fn "${@:2}"
  else
    print_usage
  fi
  wait_for_key
}

wait_for_key() {
  echo "Press any key to continue"
  while [ true ]; do
    read -t 5 -n 1
    if [ $? = 0 ]; then
      exit
    else
      echo "waiting for the keypress"
    fi
  done
}

print_usage() {
  echo "Usage: ed <type> <file>"
}

_ed_0() {
  vi $nex_mods_path/bin/ed
}

_ed_mod() {
  if [ -z "$1" ]; then
    vi $mods_path
  else
    vi $mods_path/"$1".bash
  fi
}

_ed_umod() {
  if [ -z "$1" ]; then
    vi $user_mods_path
  else
    vi $user_mods_path/"$1".bash
  fi
}

_ed_bin() {
  local v="$1"
  if [ -z "$v" ]; then
    vi $chk_dotfiles_path/bin
  else
    vi $chk_dotfiles_path/bin/$v
  fi
}

_ed_tmux() {
  vi $nex_tmux_path
}

_ed_mux() {
  local mux_path=$nex_tmux_path/mux
  local v="$1"
  if [ -z "$v" ]; then
    vi $mux_path
  else
    vi $mux_path/$v.sh
  fi
}

_ed_input() {
  $HOME/inputrc
}

_ed_bash() {
  vi $HOME/.bashrc
}

_ed_ssh() {
  vi $HOME/.ssh/config
}


_ed_vim() {
  vi $HOME/.vimrc
}

main "$@"
